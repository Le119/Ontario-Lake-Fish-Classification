---
title: "Fish-Behaviour-Exploration"
author: "Lewei Er"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
# put the data in the same folder with the project
load("~/Ontario-Lake-Fish-Classification/processed_AnalysisData.Rdata")
```

```{r}
# make plots for depth over time
fishes <- unique(processed_data$fishNum)

for (fish in fishes) {
  plot(processed_data[processed_data$fishNum == fish,]$pingNumber, -processed_data[processed_data$fishNum == fish,]$Target_true_depth, main = fish)
}
```

```{r}
# make plots for depth over time with common depth scale
fishes <- unique(processed_data$fishNum)

for (fish in fishes) {
  plot(processed_data[processed_data$fishNum == fish,]$pingNumber, -processed_data[processed_data$fishNum == fish,]$Target_true_depth, main = fish, ylim = c(-19, -9))
}
```

```{r}
# function to look at one specific fish
specific_fish_ping_lag <- function(fishCode, indicator_n = 200){
  fish_of_interest <- (data.frame(processed_data[processed_data$fishNum == fishCode, ]))
  lst_of_ping <- c()
  for (i in 1:(nrow(fish_of_interest) - 1)){
    diff_t = fish_of_interest[i + 1,]$pingNumber - fish_of_interest[i,]$pingNumber
    if ( diff_t >= indicator_n){
      lst_of_ping <- c(lst_of_ping, i)
    }
  }
  cat("Fish", fishCode, "pings:", lst_of_ping, "\n")
}

# sample usage
specific_fish_ping_lag("LT001", 100)
```

```{r}
# generate starting ping numbers of gaps
fishes <- unique(processed_data$fishNum)
for (fish in fishes) {
  specific_fish_ping_lag(fish)
}
```








